<h1>Base Count</h1>
<hr>

<div class="row">

  <div class="col-6">
    <h4>十進位</h4>
    <div class="form-group row">
      <label for="" class="col-form-label col-sm-1">R:</label>
      <div class="col-sm-11">
        <%= text_field_tag "red", nil, class: "form-control" %>
      </div>
    </div>
    <div class="form-group row">
      <label for="" class="col-form-label col-sm-1">G:</label>
      <div class="col-sm-11">
        <%= text_field_tag "green", nil, class: "form-control" %>
      </div>
    </div>
    <div class="form-group row">
      <label for="" class="col-form-label col-sm-1">B:</label>
      <div class="col-sm-11">
        <%= text_field_tag "blue", nil, class: "form-control" %>
      </div>
    </div>
    <p id="from-10-to-16" class="btn btn-primary">轉換</p>
  </div>
  <br>

  <div class="col-1">

  </div>
  <div class="col-5">
    <h4>十六進位</h4>
    <%= text_field_tag "hex" %>
    <p></p>

    <div id="hex-result"></div>
  </div>
</div>

<style media="screen">
  #hex-result {
    width: 100px;
    height: 100px;
    border: 1px solid #ccc;
  }
</style>

<script type="text/javascript">
  var convert = {
    1: "1",
    2: "2",
    3: "3",
    4: "4",
    5: "5",
    6: "6",
    7: "7",
    8: "8",
    9: "9",
    10: "A",
    11: "B",
    12: "C",
    13: "D",
    14: "E",
    15: "F"
  };

  $("#from-10-to-16").on("click", function(){
    var red_10 = $('#red').val();
    var green_10 = $('#green').val();
    var blue_10 = $('#blue').val();

    var red_16 = count_10_to_16(red_10);
    var green_16 = count_10_to_16(green_10);
    var blue_16 = count_10_to_16(blue_10);

    var result = red_16+green_16+blue_16;
    console.log(result);

    $("#hex").val(result);
    $("#hex-result").css("background-color", "#"+result);
  });

  function count_10_to_16(number) {
    console.log("convert "+number);

    if (number == 0) {
      return("00");
    } else if (number < 16){
      return(number);
    } else {
      var first = Math.floor(number / 16);
      var secound = number % 16;
      var result = convert[first]+convert[secound];
      console.log(result);
      return(result);
    }

  };


</script>
